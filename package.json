{
  "name": "diffy-explain-ai",
  "displayName": "Diffy Commit AI - Generate Your Commit Message",
  "description": "Generate Commit Message for You or Explains The Changed Code Using Git Diff And OpenAi In Natural Language",
  "version": "1.1.0",
  "publisher": "hitclaw",
  "engines": {
    "vscode": "^1.105.0"
  },
  "categories": [
    "SCM Providers"
  ],
  "repository": {
    "url": "https://github.com/Hi7cl4w/diffy-explain-ai.git"
  },
  "bugs": {
    "url": "https://github.com/Hi7cl4w/diffy-explain-ai/issues"
  },
  "keywords": [
    "git",
    "generate",
    "message",
    "commit",
    "openai",
    "vs-code",
    "vscode",
    "productivity"
  ],
  "icon": "icons/icon.png",
  "main": "./dist/extension.js",
  "contributes": {
    "menus": {
      "scm/title": [
        {
          "command": "diffy-explain-ai.generateCommitMessage",
          "when": "scmProvider == git",
          "group": "navigation",
          "title": "Generate Commit Message"
        },
        {
          "command": "diffy-explain-ai.generateCommitMessage",
          "when": "scmProvider == git",
          "group": "inline",
          "title": "Generate Commit Message"
        },
        {
          "command": "diffy-explain-ai.generateCommitMessage",
          "when": "scmProvider == git",
          "group": "inline",
          "title": "Generate Commit Message"
        }
      ]
    },
    "commands": [
      {
        "command": "diffy-explain-ai.explainDiffClipboard",
        "title": "DIFFY: Explain Changes and Copy to Clipboard",
        "icon": {
          "dark": "icons/magic.svg",
          "light": "icons/magic-light.svg"
        }
      },
      {
        "command": "diffy-explain-ai.generateCommitMessage",
        "title": "DIFFY: Generate Commit Message",
        "icon": {
          "dark": "icons/magic.svg",
          "light": "icons/magic-light.svg"
        }
      },
      {
        "command": "diffy-explain-ai.generateCommitMessageClipboard",
        "title": "DIFFY: Generate Commit Message and Copy to Clipboard",
        "icon": {
          "dark": "icons/magic.svg",
          "light": "icons/magic-light.svg"
        }
      },
      {
        "command": "diffy-explain-ai.explainAndPreview",
        "title": "DIFFY: Explain and Preview",
        "icon": {
          "dark": "icons/magic.svg",
          "light": "icons/magic-light.svg"
        }
      }
    ],
    "configuration": {
      "type": "object",
      "properties": {
        "diffy-explain-ai.aiServiceProvider": {
          "type": "string",
          "enum": [
            "openai",
            "vscode-lm",
            "gemini"
          ],
          "default": "vscode-lm",
          "markdownDescription": "Select the AI service provider to use for generating commit messages. \n\n- **vscode-lm**: Use VS Code's built-in Language Model API (GitHub Copilot) - Default\n- **openai**: Use OpenAI API directly (requires API key)\n- **gemini**: Use Google Gemini API (requires API key)"
        },
        "diffy-explain-ai.vscodeLmModel": {
          "type": "string",
          "enum": [
            "auto",
            "copilot-gpt-4o",
            "copilot-gpt-4",
            "copilot-gpt-4-turbo",
            "copilot-gpt-3.5-turbo",
            "copilot-gpt-3.5",
            "copilot-o1",
            "copilot-o1-mini",
            "copilot-o1-preview"
          ],
          "enumDescriptions": [
            "Automatically selects the best available model (recommended)",
            "GitHub Copilot GPT-4o model - Latest and most capable",
            "GitHub Copilot GPT-4 model - High capability model",
            "GitHub Copilot GPT-4 Turbo model - Fast and capable",
            "GitHub Copilot GPT-3.5 Turbo model - Fast and efficient",
            "GitHub Copilot GPT-3.5 model - Standard capability",
            "GitHub Copilot o1 model - Advanced reasoning model",
            "GitHub Copilot o1-mini model - Compact reasoning model",
            "GitHub Copilot o1-preview model - Preview of o1 capabilities"
          ],
          "default": "auto",
          "markdownDescription": "Select the VS Code Language Model to use when `aiServiceProvider` is set to `vscode-lm`. Requires GitHub Copilot subscription. \n\nAvailable models may vary based on your Copilot subscription tier:\n\n- **auto**: Automatically selects the best available model\n- **copilot-gpt-4o**: Latest GPT-4o model (recommended for most users)\n- **copilot-gpt-4**: GPT-4 model with high reasoning capabilities\n- **copilot-gpt-4-turbo**: Fast GPT-4 Turbo model\n- **copilot-gpt-3.5-turbo**: Fast and efficient GPT-3.5 Turbo\n- **copilot-gpt-3.5**: Standard GPT-3.5 model\n- **copilot-o1**: Advanced o1 reasoning model (may require higher tier)\n- **copilot-o1-mini**: Compact o1-mini model\n- **copilot-o1-preview**: Preview access to o1 capabilities"
        },
        "diffy-explain-ai.proxyUrl": {
          "type": "string",
          "default": "",
          "description": "Provide a user-defined URL for the OpenAI API proxy server. Please ensure the server's availability is confirmed. The default value is: https://api.openai.com/v1."
        },
        "diffy-explain-ai.openAiKey": {
          "type": "string",
          "markdownDescription": "Enter your api key from openai.com [Go to API Key Page](https://beta.openai.com/account/api-keys)"
        },
        "diffy-explain-ai.model": {
          "type": "string",
          "default": "gpt-4-turbo",
          "markdownDescription": "OpenAI models to use for your prompts. [Documentation](https://beta.openai.com/docs/models/models). \n\n**If you face 400 Bad Request please make sure you are using the right model for your integration method.**"
        },
        "diffy-explain-ai.geminiApiKey": {
          "type": "string",
          "markdownDescription": "Enter your API key from Google AI Studio [Go to API Key Page](https://aistudio.google.com/app/apikey)"
        },
        "diffy-explain-ai.geminiModel": {
          "type": "string",
          "default": "gemini-2.0-flash-exp",
          "markdownDescription": "Google Gemini models to use for your prompts. [Documentation](https://ai.google.dev/gemini-api/docs/models/gemini). \n\nPopular models:\n- **gemini-2.0-flash-exp**: Latest experimental model (fast and capable)\n- **gemini-1.5-pro**: High-capability model for complex tasks\n- **gemini-1.5-flash**: Fast and efficient model"
        },
        "diffy-explain-ai.temperature": {
          "type": "number",
          "default": 0.2,
          "description": "Temperature is a parameter used in OpenAI's language models to control the level of randomness and creativity in generated text, with higher values making the output more random and lower values making it more deterministic."
        },
        "diffy-explain-ai.maxTokens": {
          "type": "number",
          "default": 196,
          "description": "Parameter in OpenAI's language models that limits the maximum length of the generated text output to a specified number of tokens, helping control the length of the response."
        },
        "diffy-explain-ai.aiInstructions": {
          "type": "string",
          "default": "Analyze the provided git diff --staged output, categorize the changes into a conventional commit type (e.g., feat, fix, docs, chore,style), determine if a scope is applicable, and then synthesize a concise commit message that follows the format  <type>[optional scope]: <description> [optional body] [optional footer(s)]"
        },
        "diffy-explain-ai.commitMessageType": {
          "type": "string",
          "enum": [
            "conventional",
            "gitmoji",
            "custom"
          ],
          "enumDescriptions": [
            "Conventional Commits format: <type>[optional scope]: <description>",
            "Gitmoji format with emoji prefixes: ðŸŽ¨ :<emoji>: <description>",
            "Custom user-defined format using a template with placeholders"
          ],
          "default": "conventional",
          "markdownDescription": "Choose the commit message format style:\n\n- **conventional**: Standard Conventional Commits format (e.g., `feat: add new feature`)\n- **gitmoji**: Commits with emoji prefixes (e.g., `âœ¨ feat: add new feature`)\n- **custom**: Fully customizable template with placeholders (configure via Custom Commit Prompt setting)"
        },
        "diffy-explain-ai.customCommitPrompt": {
          "type": "string",
          "default": "Generate a commit message for the following git diff.\n\nRequirements:\n- Maximum subject length: {maxLength} characters\n- Use imperative mood\n- Be concise and clear{bodyInstructions}\n\nReturn ONLY the commit message, no explanations.",
          "markdownDescription": "Custom commit message generation prompt when **Commit Message Type** is set to `custom`. \n\nSupported placeholders:\n- `{maxLength}` - Maximum subject line length\n- `{bodyInstructions}` - Auto-filled based on Include Commit Body setting\n- `{locale}` - Language/locale for the message\n- `{diff}` - The actual git diff (automatically appended)\n\nExample template:\n```\nGenerate a {locale} commit message following our team convention:\n- Start with JIRA ticket: [PROJ-XXX]\n- Subject max {maxLength} chars\n- Include impact analysis{bodyInstructions}\n```"
        },
        "diffy-explain-ai.includeCommitBody": {
          "type": "boolean",
          "default": false,
          "markdownDescription": "Include a detailed body section in commit messages with bullet points explaining the changes. When enabled, commit messages will have:\n\n```\nfeat: add user authentication\n\n- Implement JWT token generation\n- Add login and registration endpoints\n- Create user model and database schema\n```"
        },
        "diffy-explain-ai.excludeFilesFromDiff": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "default": [
            "package-lock.json",
            "yarn.lock",
            "pnpm-lock.yaml",
            "*.jpg",
            "*.png",
            "*.gif",
            "*.svg",
            "*.ico",
            "*.woff",
            "*.woff2",
            "*.ttf",
            "*.eot"
          ],
          "markdownDescription": "File patterns to exclude from AI analysis when generating commit messages. This helps reduce token usage and improve quality by filtering out:\n\n- Lock files (package-lock.json, yarn.lock)\n- Large binary assets (images, fonts)\n- Generated files\n\nSupports glob patterns like `*.log`, `dist/**`, `**/*.min.js`"
        },
        "diffy-explain-ai.maxCommitMessageLength": {
          "type": "number",
          "default": 72,
          "minimum": 50,
          "maximum": 200,
          "markdownDescription": "Maximum character length for commit message subject line. Following best practices:\n\n- **50**: Strict GitHub standard\n- **72**: Common standard (default)\n- **100**: Relaxed limit"
        }
      }
    }
  },
  "scripts": {
    "vscode:prepublish": "npm run package",
    "compile": "webpack",
    "watch": "webpack --watch",
    "package": "webpack --mode production --devtool hidden-source-map",
    "compile-tests": "tsc -p . --outDir out",
    "watch-tests": "tsc -p . -w --outDir out",
    "pretest": "pnpm run compile-tests && pnpm run compile && pnpm run lint",
    "type-check": "tsc --noEmit",
    "lint": "biome check --write .",
    "lint:check": "biome check .",
    "format": "biome format --write .",
    "format:check": "biome format .",
    "test": "node ./out/test/runTest.js"
  },
  "devDependencies": {
    "@biomejs/biome": "2.3.2",
    "@types/glob": "^8.0.0",
    "@types/mocha": "^10.0.1",
    "@types/node": "^22.19.0",
    "@types/vscode": "^1.105.0",
    "@vscode/test-electron": "^2.2.0",
    "glob": "^8.0.3",
    "mocha": "^10.1.0",
    "ts-loader": "^9.4.1",
    "typescript": "^4.9.3",
    "undici-types": "^7.16.0",
    "webpack": "^5.76.0",
    "webpack-cli": "^5.0.0"
  },
  "dependencies": {
    "@google/genai": "^1.28.0",
    "axios": "^1.12.0",
    "axios-retry": "^3.5.0",
    "openai": "^4.7.0",
    "simple-git": "^3.16.0"
  }
}
